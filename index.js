const Fastify = require('fastify');
const noblox = require("noblox.js")
var dotenv = require('dotenv')
var dotenvExpand = require('dotenv-expand')
const wait = require("wait")
var myEnv = dotenv.config()
dotenvExpand.expand(myEnv)
noblox.setCookie("_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_EAC68CC50B370C7286E92D3D19DF5DA78FD31B880F65A224B58B74246BFF19C70B96EBAE5A60B43058DEA7978E452AB6DBDFF0006C7B8D1C9C435488A2E7B27B128612211564D205626D20495C169B8536F4A213BB571C65A60DFA7A4908404265F9AC7AB1E710D5ACB0AD5D11113EA628BDF0F3A829D7ED6F57EC2964DBCFE6409DB68B2600463ABF605F460BC326C84921EB7755F0C1F92FCB9F606D0E86C89A6B015B40A692E027DCD53B26D1B84DB47E5BCB78E375E5168066148462765DDA1683F428AB2EB09C634511EF3350586DA5C44B915E5336021BD08BDE2F0D0F01130622161C8FCCAFB8A116A5034CB4B11AF5BDA6EFA7B5246A63072112F0E2425B2489A30E3B9CC29652DCECCDAF26B6AACC735DF23E215B324708CACC28617D084DA0A74EB7BF9C5C520AEBEC09B1C95CC86DFBCBC8DD15294939105953929769FD465162EE32C2D4CECE0731F40AE089E3D76839A650F1B4BBA02A18B110C21BC4A8C9BB533F68B6B80B1CBF5383AEE2565658832BC3DFBC20481875419A21824E11",false)
const app = Fastify({logger:true});

app.get('/', (req, res) => {
  res.send('Hello Express app!')
});
app.post('/chat', async (req, res) => { 
noblox.sendChatMessage(18180590572,"Name:"+req.body.name);
await wait(300)
noblox.sendChatMessage(18180590572,"Roblox username:"+req.body.username);
await wait(300)
noblox.sendChatMessage(18180590572,"Message:" + req.body.message)
res.send("Done")
});
app.listen({port:3000,host:"0.0.0.0"}, () => {
  console.log('server started');
});
